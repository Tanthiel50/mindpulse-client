import React, { useEffect, useRef } from 'react';
import * as echarts from 'echarts';

const HomeChart = () => {
  const chartRef = useRef(null);

  useEffect(() => {
    if (chartRef.current) {
      const myChart = echarts.init(chartRef.current, 'dark');

      const option = {
        title: {
          text: "Évolution du nombre total de créations\n d'entreprise en France, par an",
          top: 'top',
          left: 'center',
        },
        xAxis: {
          type: 'category',
          boundaryGap: false,
        },
        yAxis: {
          type: 'value',
          boundaryGap: [0, '10%'],
          offset:-10 
        },
        visualMap: {
          type: 'piecewise',
          text: [ 'crise sanitaire','creation auto-entreprise'],
          showLabel: false,
          textGap: 50,
          orient: 'horizontal',
          left: 'center',
          show: true,
          dimension: 0,
          seriesIndex: 0,
          pieces: [
            {
              gt: 29,
              lt: 34,
              color: 'rgba(0, 0, 200, 0.8)',
            },
            {
              gt: 75,
              lt: 82,
              color: 'rgba(100, 0, 180, 0.8)',
            },
          ],
        },
        series: [
          {
            type: 'line',
            smooth: 0.6,
            symbol: 'none',
            lineStyle: {
              color: '#5470C6',
              width: 5,
            },
            markLine: {
              symbol: ['none', 'none'],
              label: { show: false },
              data: [{ xAxis: 29 }, { xAxis: 34 }, { xAxis: 75 }, { xAxis: 82 }],
            },
            areaStyle: {},
            data: [
          ["2000-T4", 236186],
          ["2001-T1", 236593],
          ["2001-T2", 234862],
          ["2001-T3", 233490],
          ["2001-T4", 233414],
          ["2002-T1", 231930],
          ["2002-T2", 232034],
          ["2002-T3", 233824],
          ["2002-T4", 235269],
          ["2003-T1", 239897],
          ["2003-T2", 245164],
          ["2003-T3", 251729],
          ["2003-T4", 261161],
          ["2004-T1", 276244],
          ["2004-T2", 288280],
          ["2004-T3", 292939],
          ["2004-T4", 293558],
          ["2005-T1", 289904],
          ["2005-T2", 291175],
          ["2005-T3", 292795],
          ["2005-T4", 296539],
          ["2006-T1", 304498],
          ["2006-T2", 304725],
          ["2006-T3", 306544],
          ["2006-T4", 312626],
          ["2007-T1", 322015],
          ["2007-T2", 330977],
          ["2007-T3", 345430],
          ["2007-T4", 357190],
          ["2008-T1", 365230],
          ["2008-T2", 371947],
          ["2008-T3", 371740],
          ["2008-T4", 363394],
          ["2009-T1", 401260],
          ["2009-T2", 463912],
          ["2009-T3", 520588],
          ["2009-T4", 599594],
          ["2010-T1", 643394],
          ["2010-T2", 646156],
          ["2010-T3", 646788],
          ["2010-T4", 640385],
          ["2011-T1", 608566],
          ["2011-T2", 591400],
          ["2011-T3", 579967],
          ["2011-T4", 568529],
          ["2012-T1", 574091],
          ["2012-T2", 572423],
          ["2012-T3", 571720],
          ["2012-T4", 567298],
          ["2013-T1", 562240],
          ["2013-T2", 561452],
          ["2013-T3", 561025],
          ["2013-T4", 566808],
          ["2014-T1", 568883],
          ["2014-T2", 571491],
          ["2014-T3", 578289],
          ["2014-T4", 582737],
          ["2015-T1", 574464],
          ["2015-T2", 570596],
          ["2015-T3", 566729],
          ["2015-T4", 564745],
          ["2016-T1", 578019],
          ["2016-T2", 593041],
          ["2016-T3", 597123],
          ["2016-T4", 603540],
          ["2017-T1", 615705],
          ["2017-T2", 618912],
          ["2017-T3", 635730],
          ["2017-T4", 657591],
          ["2018-T1", 682175],
          ["2018-T2", 709812],
          ["2018-T3", 728642],
          ["2018-T4", 749330],
          ["2019-T1", 782911],
          ["2019-T2", 805883],
          ["2019-T3", 834546],
          ["2019-T4", 864557],
          ["2020-T1", 852560],
          ["2020-T2", 813288],
          ["2020-T3", 858406],
          ["2020-T4", 900169],
          ["2021-T1", 966966],
          ["2021-T2", 1065619],
          ["2021-T3", 1055841],
          ["2021-T4", 1050520],
          ["2022-T1", 1048319],
          ["2022-T2", 1032747],
          ["2022-T3", 1046252],
          ["2022-T4", 1061969],
          ["2023-T1", 1047870],
          ["2023-T2", 1044300],
          ["2023-T3", 1049259],
          ["2023-T4", 1051476],
        ],
          },
        ],
      };

      myChart.setOption(option);
    }
  }, []); // Empty dependency array means this effect runs once on mount

  return (
    <div
      ref={chartRef}
      style={{left:'center', width: "100%", height: "400px" }}
    />
  );
};

export default HomeChart;
